# 区间调度问题

## 原问题

> 详情参考[LeetCode435](https://leetcode-cn.com/problems/non-overlapping-intervals/)。

**问题描述**：有n项工作 $\{(s_0, e_0), (s_1, e_1), \ldots, (s_n, e_n)\}$，其中 $s$ 表示起始该工作的起始时间，$e$ 表示该工作的结束时间。选取一个最长子序列 $\{(s_{i_0}, e_{i_0}), (s_{i_1}, e_{i_1}), \ldots, (s_{i_k}, e{i_k})\}$ ，满足这些工作的时间互不相交。

**目标**：这个问题可以用最长递增子序列来做，但是有更巧妙的贪心算法。除去排序的时间复杂度 $O(n\log n)$，贪心算法可以到 $O(n)$ 的时间复杂度。

**算法核心思想**：将这些工作按照结束时间 $e$ 做升序排序。不断选取当前剩余工作中，结束时间最早的工作，然后把与这个工作冲突的工作去掉。

**证明**：

- 首先，从算法流程可以保证，选出来的子序列互不冲突。

- 其次：规定这个贪心法所构造的结果为 $\{(s_{i_0}, e_{i_0}), (s_{i_1}, e_{i_1}), \ldots, (s_{i_k}, e_{i_k})\}$，以及最优解为 $\{(s_{j_0}, e_{j_0}), (s_{j_1}, e_{j_1}), \ldots, (s_{j_m}, e_{j_m})\}$，那么我们可以得到对于任意的 $idx$, 我们可得 $e_{i_{idx}} \le e_{j_{idx}}$。由数学归纳法可得: $idx = 0$ 满足要求；当 $idx > 0$ 时假设 $e_{i_{idx - 1}} \le e_{j_{idx - 1}}$ 那么 最优解的剩余可选区间 少于 贪心法的剩余可选空间，而贪心法又是在剩余可选空间中选择结束时间最早的区间，那么 $e_{i_{idx}} \le e_{j_{idx}}$。

- 最后，我们证明 $k = m$。我们用反证法，如果 $k < m$，又由于 $e_{i_{k}} < e_{j_{k}}$, 那么 $e_{i_{k}} < s_{j_{k+1}}$，即最优解的剩余区间可以续给贪心法的结果，这就和我们贪心法的流程矛盾了。


## 变种1：射气球问题

> 详情参考[LeetCode452](https://leetcode-cn.com/problems/minimum-number-of-arrows-to-burst-balloons/)。

**问题描述**：大小不同的气球排在同一个水平面上（球心的 $z$ 坐标相同），那么在 $x-y$ 平面每个气球就是一个个大小不同互不相交的圆。如果我们在 $x$ 轴上垂直于 $x$ 轴射击，每次射击时，直线上穿过的气球都会被射爆，那么最多需要开几枪才能把所有气球射爆。

**分析**：每个气球在 $x$ 轴上的投影是一个区间，有重叠区间的气球只需要一枪就可以全部射爆，那么这个问题就是求最大不重叠区间的个数。
